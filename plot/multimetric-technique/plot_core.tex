\begin{tikzpicture}
  \begin{axis}[ticks = none, 
    axis on top,
    axis x line=bottom,
    axis y line=left,
  	xlabel={Runtime \emph{(s)}},
    ylabel={Energy \emph{(J)}},    
    xmin=0, xmax=50,
    ymin=0, ymax=3300,
    width=\linewidth,
    legend style={legend pos=north west}
    ]

    %% Model Parameters %%
    \pgfmathsetmacro{\baselinepower}{30} % NOP code
    \pgfmathsetmacro{\rooflinepower}{60}
    \pgfmathsetmacro{\codepower}{47} 
    \pgfmathsetmacro{\codetime}{30}

    %% Intermezzo Values %%
    \pgfmathsetmacro{\codeenergy}{\codepower * \codetime}
    \pgfmathsetmacro{\baselineenergy}{\baselinepower * \codetime}
    \pgfmathsetmacro{\rooflineenergy}{\rooflinepower * \codetime}

    % arguments: code power, code time, x, n 
    \pgfmathdeclarefunction{metricbound}{4}{%
      \pgfmathparse{((#1 * #2^(#4 + 1)) / #3^#4)}%
    }
    \pgfmathdeclarefunction{definitionbound}{4}{%
      \pgfmathparse{((#1 / #2^(#4 + 1)) * #3^(#4 + 2))}%
    }
 
    % BETA ROOFLINE BOUND
    \addplot[color=red, domain=\pgfkeysvalueof{/pgfplots/xmin}:\pgfkeysvalueof{/pgfplots/xmax}] {\rooflinepower * x};
    \addlegendentry{$P_{max}$ Energy Bound}

    % ALPHA BASELINE BOUND 
    \addplot[color=green, name path=basebound, domain=\pgfkeysvalueof{/pgfplots/xmin}:\pgfkeysvalueof{/pgfplots/xmax}] {\baselinepower * x};
    \addlegendentry{$P_{min}$ Energy Bound} 

    % Constant Time vertical dots
    \draw[densely dotted] ({axis cs:\codetime,\baselineenergy}) -- ({axis cs:\codetime,\codeenergy});

    %% Energy Area %%
    \addplot[name path=energyopt, forget plot, domain=19.14894:47, blue!6] {metricbound(\codepower, \codetime, x, 0)};
    \addplot[name path=energydef, forget plot, draw=none, domain=19.14894:\codetime+1] {definitionbound(\codepower, \codetime, x, 0)};
    \path[name path=energyspace,
      intersection segments={
        of=energydef and energyopt,
        sequence=A0 -- B1,
      }
      ]; 
    \addplot[blue!6] fill between[of=energyspace and basebound];
    \addlegendentry{Energy}

    %% Energy Delay Product Area %% 
    \addplot[name path=edpopt, forget plot, domain=19.14894:47, blue!15] {metricbound(\codepower, \codetime, x, 1)};
    \addplot[name path=edpdef, forget plot, draw=none, domain=19.14894:\codetime+1] {definitionbound(\codepower, \codetime, x, 1)};
    \path[name path=edpspace,
      intersection segments={
        of=edpdef and edpopt,
        sequence=A0 -- B1,
      }
      ]; 
    \addplot[blue!15] fill between[of=edpspace and basebound];
    \addlegendentry{$EDP$}

    %% Energy Delay Product Squared Area %% 
    \addplot[name path=ed2popt, forget plot, domain=19.14894:47, blue!21] {metricbound(\codepower, \codetime, x, 2)};
    \addplot[name path=ed2pdef, forget plot, draw=none, domain=19.14894:\codetime+1] {definitionbound(\codepower, \codetime, x, 2)};
    \path[name path=ed2pspace,
      intersection segments={
        of=ed2pdef and ed2popt,
        sequence=A0 -- B1,
      }
      ]; 
    \addplot[blue!21] fill between[of=ed2pspace and basebound];
    \addlegendentry{$ED^2P$}

    %% Energy Delay Product Cubed Area %% 
    \addplot[name path=ed3popt, forget plot, domain=19.14894:47, blue!28] {metricbound(\codepower, \codetime, x, 3)};
    \addplot[name path=ed3pdef, forget plot, draw=none, domain=19.14894:\codetime+1] {definitionbound(\codepower, \codetime, x, 3)};
    \path[name path=ed3pspace,
      intersection segments={
        of=ed3pdef and ed3popt,
        sequence=A0 -- B1,
      }
      ]; 
    \addplot[blue!28] fill between[of=ed3pspace and basebound];
    \addlegendentry{$ED^3P$}

     \node[circle,fill,inner sep=2pt] at (axis cs:\codetime,\codeenergy) {};
    \node[above right] at (axis cs:\codetime,\codeenergy) {$\theta$};
  \end{axis}
\end{tikzpicture}
